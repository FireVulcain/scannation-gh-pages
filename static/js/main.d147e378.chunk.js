(this.webpackJsonpmanga_trad=this.webpackJsonpmanga_trad||[]).push([[0],{112:function(e,t,a){e.exports=a(146)},117:function(e,t,a){},118:function(e,t,a){},146:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),l=a.n(o),c=(a(117),a(46)),i=(a(118),r.a.createContext(null)),s=a(7),m=a(6),u=a(9),p=a(10),h=a(11),d=r.a.createContext(null),g=function(e){return function(t){return r.a.createElement(d.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))}))}},f=d,b=a(16),E=a(58),v=a.n(E),C=(a(119),a(121),a(124),a(147),{apiKey:"AIzaSyAIcG2u9dgxe3s3MyPT7LkiiLlMsx3ZPno",authDomain:"manga-trad.firebaseapp.com",databaseURL:"https://manga-trad.firebaseio.com",projectId:"manga-trad",storageBucket:"manga-trad.appspot.com",messagingSenderId:"614505475450",appId:"1:614505475450:web:305fc65a01622c182c7ac3",measurementId:"G-3N37D74YTC"}),j=function e(){var t=this;Object(s.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.onAuthUserListener=function(e,a){return t.auth.onAuthStateChanged((function(n){n?t.user(n.uid).once("value").then((function(t){var a=t.val();a.roles||(a.roles={}),n=Object(b.a)({uid:n.uid,email:n.email},a),e(n)})):a()}))},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},v.a.initializeApp(C),this.auth=v.a.auth(),this.db=v.a.database(),this.firestore=v.a.firestore(),this.storage=v.a.storage()},O=function(e){var t=function(t){function a(e){var t;return Object(s.a)(this,a),(t=Object(u.a)(this,Object(p.a)(a).call(this,e))).state={authUser:null},t}return Object(h.a)(a,t),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.onAuthUserListener((function(t){e.setState({authUser:t})}),(function(){e.setState({authUser:null})}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return r.a.createElement(i.Provider,{value:this.state.authUser},r.a.createElement(e,this.props))}}]),a}(r.a.Component);return g(t)},y=a(21),I=function(e){return function(t){var a=function(a){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(p.a)(n).apply(this,arguments))}return Object(h.a)(n,a),Object(m.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.onAuthUserListener((function(a){e(a)||t.props.history.push("/signin")}),(function(){return t.props.history.push("/signin")}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var a=this;return r.a.createElement(i.Consumer,null,(function(n){return e(n)?r.a.createElement(t,a.props):null}))}}]),n}(r.a.Component);return Object(y.a)(c.f,g)(a)}},N=a(14),S=a(189),w=g((function(e){var t=e.firebase;return r.a.createElement(S.a,{onClick:t.doSignOut},"D\xe9connexion")})),k=a(210),x=a(193),M=a(4),A=a(194),D=a(99),_=a(195),P=a(55),T=a.n(P),U=a(92),L=a.n(U),z=a(91),F=a.n(z),R=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e.state={anchorEl:null},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(i.Consumer,null,(function(a){return r.a.createElement(k.a,{className:t.container},r.a.createElement(x.a,{container:!0,alignItems:"center",className:t.menu},r.a.createElement(x.a,{item:!0,md:1},r.a.createElement(N.b,{to:"/",className:t.logo})),r.a.createElement(x.a,{container:!0,justify:"space-between",item:!0,md:10},r.a.createElement(k.a,{className:t.root},r.a.createElement(S.a,{component:N.b,to:"/"},"Accueil"),r.a.createElement(S.a,{component:N.b,to:"/planning"},"Planning"),r.a.createElement(S.a,{component:N.b,to:"/mangas"},"Mangas")),a?r.a.createElement(k.a,{display:"flex"},!!a.roles.ADMIN&&r.a.createElement(k.a,null,r.a.createElement(N.b,{className:t.editButton,to:"/delete/delete_data"},r.a.createElement(L.a,null)),r.a.createElement(A.a,{className:t.fab,onClick:e.handleClick,size:"small",color:"primary"},r.a.createElement(T.a,null)),r.a.createElement(D.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null,anchorEl:e.state.anchorEl,open:Boolean(e.state.anchorEl),onClose:e.handleClose},r.a.createElement(_.a,{component:N.b,to:"/upload/upload_manga",onClick:e.handleClose},"Manga"),r.a.createElement(_.a,{component:N.b,to:"/upload/upload_chapter",onClick:e.handleClose},"Chapitre"),r.a.createElement(_.a,{component:N.b,to:"/upload/upload_planning",onClick:e.handleClose},"Planning"),r.a.createElement(_.a,{component:N.b,to:"/upload/upload_news",onClick:e.handleClose},"Actualit\xe9s"))),r.a.createElement(S.a,{component:N.b,to:"/account"},"Compte"),r.a.createElement(w,null)):r.a.createElement(k.a,null,r.a.createElement(S.a,{component:N.b,to:"/signin"},"Connexion"),r.a.createElement(S.a,{component:N.b,to:"/signup"},"Inscription")))))}))}}]),t}(n.Component),W=Object(M.a)((function(e){return{root:{"& > * + *":{marginLeft:e.spacing(2)}},container:{background:"#1c252d",boxShadow:"0 2px 4px -1px rgba(0,0,0,0.34),0 2px 2px -2px rgba(0,0,0,0.26),0 1px 4px 0 rgba(0,0,0,0.28)","& *":{color:"#fff",textTransform:"none"},"& a, & button":{fontSize:"18px"}},menu:{maxWidth:"1325px",width:"100%",margin:"0 auto",position:"relative",minHeight:"70px"},fab:{background:"transparent",boxShadow:"none","&:hover":{background:"transparent"}},logo:{display:"inline-block",width:"95px",height:"80px",position:"absolute",top:"0",background:"url(".concat(F.a,") no-repeat"),backgroundSize:"contain"},editButton:{verticalAlign:"middle",marginRight:"5px"}}}))(R),B=a(93),V=a.n(B),G=function(e){var t=e.pageMeta,a=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,null,r.a.createElement("title",null,"".concat(t.title))),a)},H=a(150),q=a(196),J=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).componentDidMount=function(){var t=e.props.firebase.firestore,a={},n={};t.collection("/mangas").get().then((function(t){t.empty?e.setState({noManga:t.empty}):t.forEach((function(e){a[e.id]=e.data()}))})).then((function(){t.collection("/chapters").limit(20).orderBy("createdAt","desc").get().then((function(t){t.empty?e.setState({noManga:t.empty,loading:!1}):(t.forEach((function(e){n[e.id]=e.data(),n[e.id].title=a[e.data().mangaId].title,n[e.id].mangaImage=a[e.data().mangaId].mangaImage})),e.setState({releases:n,loading:!1}))}))}))},e.state={releases:[],loading:!0,noManga:!1},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement(x.a,{item:!0,md:12},r.a.createElement(H.a,{variant:"h5",component:"h3",className:"titlePage"},"Les derni\xe8res sorties")),this.state.noManga?r.a.createElement(x.a,{item:!0,md:12},r.a.createElement(H.a,{variant:"body1",component:"p",color:"secondary"},"Pas de chapitre actuellement sur le site")):r.a.createElement(x.a,{item:!0,md:12,className:"containerInfo"},this.state.loading?r.a.createElement(q.a,{size:30,className:"loadingInfo"}):Object.values(this.state.releases).map((function(e,t){return r.a.createElement(N.b,{key:t,to:e.mangaId,className:t<2?"newChapter recentChapter":"newChapter notRecent"},r.a.createElement(k.a,{className:"newChapterImg"},r.a.createElement("img",{src:e.mangaImage,alt:""})),r.a.createElement(k.a,null,r.a.createElement(H.a,{variant:"body1",component:"p",className:"mangaTitle"},e.title," ",e.chapter),r.a.createElement(H.a,{variant:"body1",component:"p"},e.titleChapter)))}))))}}]),t}(n.Component),K=Object(M.a)({})(g(J)),Y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).formatDate=function(e){console.log(e)},e.componentDidMount=function(){var t=e.props.firebase.firestore,a={};t.collection("/news").limit(4).orderBy("date","desc").get().then((function(t){t.empty?e.setState({noNews:t.empty}):t.forEach((function(e){a[e.id]=e.data()}))})).then((function(){e.setState({news:a,loading:!1})}))},e.state={news:[],loading:!0,noNews:!1},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(k.a,null,r.a.createElement(x.a,{item:!0,md:12},r.a.createElement(H.a,{variant:"h5",component:"h3",className:"titlePage"},"Les derni\xe8res actus")),this.state.noNews?r.a.createElement(x.a,{item:!0,md:12},r.a.createElement(H.a,{variant:"body1",component:"p",color:"secondary"},"Pas de news actuellement sur le site")):r.a.createElement(x.a,{item:!0,md:12,className:"containerInfo"},this.state.loading?r.a.createElement(q.a,{size:30,className:"loadingInfo"}):Object.values(this.state.news).map((function(t,a){var n=new Date(1e3*t.date.seconds),o=n.getDate(),l=n.getMonth()+1;return r.a.createElement(k.a,{key:a,display:"flex",alignItems:"center",className:e.homeNews},r.a.createElement(H.a,{className:e.date},o,"/",l),r.a.createElement(H.a,{className:e.title},t.title),r.a.createElement(H.a,null,t.actuInfo))}))))}}]),t}(n.Component),Z=Object(M.a)({homeNews:{background:"#283440",color:"#fff",borderBottom:"1px solid #3e4b5b",padding:"3px 20px",minHeight:"45px","& p:not(:last-child)":{marginRight:"20px"}},title:{fontWeight:"bold",textOverflow:"ellipsis",overflow:"hidden",width:"100px",flexShrink:"0",whiteSpace:"nowrap"},date:{fontWeight:"bold",width:"45px"}})(g(Y)),$=a(197),Q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){var e=a.props.firebase.firestore,t={},n={};e.collection("/mangas").get().then((function(e){e.forEach((function(e){n[e.id]=e.data()}))})).then((function(){e.collection("/planning").orderBy("mangaName").get().then((function(e){return e.forEach((function(e){t[e.id]=e.data(),t[e.id].mangaImage=n[e.data().mangaId].mangaImage})),a.setState({planningManga:t,loading:!1})}))}))},a.state={mangas:{},planningManga:{},loading:!0},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(k.a,null,r.a.createElement(x.a,{item:!0,md:12},r.a.createElement(H.a,{variant:"h5",component:"h3",className:"titlePage"},"Les prochaines sorties")),r.a.createElement(x.a,{item:!0,md:12,className:"containerInfo"},this.state.loading?r.a.createElement(q.a,{size:30,className:"loadingInfo"}):Object.values(this.state.planningManga).map((function(t,a){var n="",o="";switch(t.status){case 25:n="Clean des pages",o=e.cleaning;break;case 50:n="Traduction en cours",o=e.translate;break;case 100:n="Dernier check",o=e.lastCheck;break;case 0:default:n="En attente du prochain chapitre",o=e.awaiting}return r.a.createElement(N.b,{key:a,to:t.mangaId,className:"newChapter"},r.a.createElement(k.a,{className:"newChapterImg"},r.a.createElement("img",{src:t.mangaImage,alt:""})),r.a.createElement(k.a,null,r.a.createElement(H.a,{className:e.progressName,variant:"body1",component:"p"},t.mangaName," : ",r.a.createElement("span",{className:o},n)),r.a.createElement($.a,{classes:{colorPrimary:e.bar,barColorPrimary:o},variant:"determinate",value:t.status})))}))))}}]),t}(n.Component),X=Object(M.a)({bar:{backgroundColor:"#929292",height:"10px",borderRadius:"100px"},awaiting:{backgroundColor:"#929292",borderRadius:"100px"},cleaning:{backgroundColor:"#E36D63",borderRadius:"100px"},translate:{backgroundColor:"#E39565",borderRadius:"100px"},lastCheck:{backgroundColor:"#D4E369",borderRadius:"100px"},progressName:{color:"#fff",fontSize:"18px",marginBottom:"5px",fontWeight:"bold","& span":{color:"#fff",fontSize:"14px",padding:"2px 10px",fontWeight:"normal"}}})(g(Q)),ee=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(G,{pageMeta:{title:"ScanNation France | Scans de manga en ligne"}},r.a.createElement(x.a,{container:!0,spacing:2,className:"main"},r.a.createElement(x.a,{item:!0,md:6},r.a.createElement(K,null)),r.a.createElement(x.a,{item:!0,md:6},r.a.createElement(Z,null),r.a.createElement(X,null))))}}]),t}(n.Component),te=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(G,{pageMeta:{title:"Les prochaines sorties | ScanNation France"}},r.a.createElement(k.a,{className:"main"},r.a.createElement(X,null)))}}]),t}(n.Component),ae=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).componentDidMount=function(){var t={};e.props.firebase.firestore.collection("mangas").get().then((function(e){e.forEach((function(e){t[e.id]=e.data()}))})).then((function(){e.setState({mangas:t,loading:!1})}))},e.state={mangas:{},loading:!0},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(G,{pageMeta:{title:"Liste de nos mangas | ScanNation France "}},r.a.createElement(x.a,{container:!0,className:"main"},r.a.createElement(x.a,{item:!0,md:12},r.a.createElement(H.a,{variant:"h5",component:"h3",className:"titlePage"},"Liste des mangas sur le site")),r.a.createElement(x.a,{item:!0,md:12,className:"containerInfo"},this.state.loading?r.a.createElement(q.a,{size:30,className:"loadingInfo"}):Object.entries(this.state.mangas).map((function(e,t){return r.a.createElement(N.b,{key:t,to:e[0],className:"newChapter"},r.a.createElement(k.a,{className:"newChapterImg"},r.a.createElement("img",{src:e[1].mangaImage,alt:""})),r.a.createElement(k.a,null,r.a.createElement(H.a,{variant:"body1",component:"p"},e[1].title),r.a.createElement(H.a,{variant:"body1",component:"span"},0===e[1].lastChapter?"\xc0 venir":"Dernier chapitre : "+e[1].lastChapter)))})))))}}]),t}(n.Component),ne=g(ae),re=a(12),oe=a(198),le={username:"",email:"",passwordOne:"",passwordTwo:"",isAdmin:!1,loading:!1,error:null},ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).onSubmit=function(e){a.setState({loading:!0});var t=a.state,n=t.username,r=t.email,o=t.passwordOne,l=t.passwordTwo,c=t.isAdmin,i={};c&&(i.ADMIN="ADMIN"),o===l?a.props.firebase.doCreateUserWithEmailAndPassword(r,o).then((function(e){return a.props.firebase.user(e.user.uid).set({username:n,email:r,roles:i})})).then((function(){a.setState(Object(b.a)({},le)),a.props.history.push("/")})).catch((function(e){a.setState({error:e})})):a.setState({error:{code:"aut/different-password",message:"Mot de passe diff\xe9rent"}}),e.preventDefault()},a.onChange=function(e){a.setState(Object(re.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(re.a)({},e.target.name,e.target.checked))},a.state=Object(b.a)({},le),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,o=e.passwordTwo,l=e.error,c=(e.isAdmin,e.loading),i=n!==o||""===n||""===a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(oe.a,{onChange:this.onChange,label:"Pseudo",value:t,name:"username"}),r.a.createElement(oe.a,{onChange:this.onChange,label:"Adresse email",type:"email",value:a,name:"email"}),r.a.createElement(oe.a,{onChange:this.onChange,label:"Mot de passe",type:"password",value:n,name:"passwordOne"}),r.a.createElement(oe.a,{onChange:this.onChange,label:"Confirmation du mot de passe",type:"password",value:o,name:"passwordTwo"}),r.a.createElement(S.a,{type:"submit",disabled:i,variant:"contained",color:"primary"},c?r.a.createElement(q.a,{size:30}):"Inscription"),l&&r.a.createElement("p",null,l.message))}}]),t}(n.Component),ie=function(){return r.a.createElement("p",null,r.a.createElement(N.b,{to:"/signup"},"Toujours pas inscrit ? Rejoignez-nous !"))},se=Object(y.a)(c.f,g)(ce),me=function(){return r.a.createElement(G,{pageMeta:{title:"Inscription | ScanNation France"}},r.a.createElement(k.a,{className:"logs_page"},r.a.createElement("h1",null,"Inscription"),r.a.createElement(se,null)))},ue={email:"",error:null,loading:!1},pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).onSubmit=function(e){a.setState({loading:!0});var t=a.state.email;a.props.firebase.doPasswordReset(t).then((function(){a.setState(Object(b.a)({},ue))})).catch((function(e){a.setState({error:e,loading:!1})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(re.a)({},e.target.name,e.target.value))},a.state=Object(b.a)({},ue),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=e.loading,o=""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(oe.a,{type:"email",onChange:this.onChange,label:"Adresse email",value:this.state.email,name:"email"}),r.a.createElement(S.a,{type:"submit",disabled:o,variant:"contained",color:"primary"},n?r.a.createElement(q.a,{size:30}):"R\xe9initialiser"),a&&r.a.createElement("p",null,a.message))}}]),t}(n.Component),he=function(){return r.a.createElement("p",null,r.a.createElement(N.b,{to:"/pw-forget"},"Mot de passe oubli\xe9 ?"))},de=function(){return r.a.createElement(G,{pageMeta:{title:"Mot de passe oubli\xe9 | ScanNation France"}},r.a.createElement(k.a,{className:"logs_page"},r.a.createElement("h1",null,"Mot de passe oubli\xe9"),r.a.createElement(ge,null)))},ge=g(pe),fe={email:"",password:"",error:null,loading:!1},be=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).onSubmit=function(e){a.setState({loading:!0});var t=a.state,n=t.email,r=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,r).then((function(){a.setState(Object(b.a)({},fe)),a.props.history.push("/")})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(re.a)({},e.target.name,e.target.value))},a.state=Object(b.a)({},fe),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,o=e.loading,l=""===a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(oe.a,{onChange:this.onChange,name:"email",value:t,label:"Adresse email",type:"email"}),r.a.createElement(oe.a,{onChange:this.onChange,name:"password",value:a,label:"Mot de passe",type:"password"}),r.a.createElement(S.a,{type:"submit",disabled:l,variant:"contained",color:"primary"},o?r.a.createElement(q.a,{size:30}):"Connexion"),n&&r.a.createElement("p",null,n.message))}}]),t}(n.Component),Ee=Object(y.a)(c.f,g)(be),ve=function(){return r.a.createElement(G,{pageMeta:{title:"Connexion | ScanNation France"}},r.a.createElement(k.a,{className:"logs_page"},r.a.createElement("h1",null,"Connexion"),r.a.createElement(Ee,null),r.a.createElement(he,null),r.a.createElement(ie,null)))},Ce={passwordOne:"",passwordTwo:"",loading:!1,error:null},je=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).onSubmit=function(e){a.setState({loading:!0});var t=a.state.passwordOne;a.props.firebase.doPasswordUpdate(t).then((function(){a.setState(Object(b.a)({},Ce))})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(re.a)({},e.target.name,e.target.value))},a.state=Object(b.a)({},Ce),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,a=e.passwordTwo,n=e.error,o=e.loading,l=t!==a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(oe.a,{onChange:this.onChange,name:"passwordOne",value:t,type:"password",label:"Nouveau mot de passe"}),r.a.createElement(oe.a,{onChange:this.onChange,name:"passwordTwo",value:a,type:"password",label:"Confirmation du mot de passe"}),r.a.createElement(S.a,{type:"submit",disabled:l,variant:"contained",color:"primary"},o?r.a.createElement(q.a,{size:30}):"Changer de mot de passe"),n&&r.a.createElement("p",null,n.message))}}]),t}(n.Component),Oe=g(je),ye=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(i.Consumer,null,(function(e){return r.a.createElement(G,{pageMeta:{title:e.username+" - Compte | ScanNation France"}},r.a.createElement(k.a,{className:"logs_page"},r.a.createElement("h1",null,e.username),r.a.createElement(x.a,{container:!0,spacing:5},r.a.createElement(x.a,{item:!0,xs:5},r.a.createElement("h2",null,"Gestion du compte :"),r.a.createElement(Oe,null)),r.a.createElement(x.a,{item:!0,xs:7},r.a.createElement("h2",null,"Commentaires :")))))}))}}]),t}(n.Component),Ie=I((function(e){return!!e}))(ye),Ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={loading:!1,users:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.users().on("value",(function(t){var a=t.val(),n=Object.keys(a).map((function(e){return Object(b.a)({},a[e],{uid:e})}));e.setState({users:n,loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.state,t=e.users,a=e.loading;return r.a.createElement("div",null,r.a.createElement("h1",null,"Admin"),a&&r.a.createElement("div",null,"Loading ..."),r.a.createElement(Se,{users:t}))}}]),t}(n.Component),Se=function(e){var t=e.users;return r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.uid},r.a.createElement("span",null,r.a.createElement("strong",null,"ID:")," ",e.uid),r.a.createElement("span",null,r.a.createElement("strong",null,"E-Mail:")," ",e.email),r.a.createElement("span",null,r.a.createElement("strong",null,"Username:")," ",e.username))})))},we=Object(y.a)(I((function(e){return e&&!!e.roles.ADMIN})),g)(Ne),ke=a(153),xe=a(154),Me=a(156),Ae=a(199),De=a(157),_e=a(211),Pe=a(42),Te=a.n(Pe),Ue={images:null,url:[],selectManga:"",selectChapter:"",selectTitle:"",isLastChapter:!1,loading:!1,errors:null},Le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).titleCase=function(e){for(var t=e.toLowerCase().split(" "),a=0;a<t.length;a++)t[a]=t[a].charAt(0).toUpperCase()+t[a].substring(1);return t.join(" ")},a.handleImage=function(e){if(e.target.files[0]){var t=e.target.files;a.setState((function(){return{images:t}}))}},a.handleChange=function(e){a.setState(Object(re.a)({},e.target.name,e.target.value))},a.handleChecked=function(e){a.setState(Object(re.a)({},e.target.value,e.target.checked))},a.handleValidation=function(){var e=a.state,t=e.selectManga,n=e.selectChapter,r=e.selectTitle,o=e.images,l={},c=!0;return t||(c=!1,l.selectManga="Champ obligatoire"),n?isNaN(n)&&(c=!1,l.selectChapter="Chiffres uniquement"):(c=!1,l.selectChapter="Champ obligatoire"),r||(c=!1,l.selectTitle="Champ obligatoire"),o||(c=!1,l.images="Image obligatoire"),a.setState({errors:l}),c},a.handleUpload=function(){if(a.handleValidation()){var e=a.props.firebase.firestore,t=a.state.images,n=[],r=[],o=a.state.selectManga+"/"+a.state.selectChapter;a.setState({loading:!0}),Object.values(t).map((function(e,t){var l=a.props.firebase.storage.ref("".concat(o,"/").concat(e.name)).put(e).then((function(e){return e.ref.getDownloadURL()})).then((function(e){r.push({pageImg:e,pageNumber:t+1})}));return n.push(l)})),Promise.all(n).then((function(){r.sort((function(e,t){return e.pageImg>t.pageImg?1:t.pageImg>e.pageImg?-1:0})),a.setState({url:r},(function(){e.collection("chapters").doc().set({chapter:parseInt(a.state.selectChapter),mangaId:a.state.selectManga,titleChapter:a.state.selectTitle,pageCount:a.state.url.length,pages:a.state.url,createdAt:new Date}).then((function(){a.state.isLastChapter&&e.collection("mangas").doc(a.state.selectManga).update({lastChapter:parseInt(a.state.selectChapter)})})).then((function(){var t=e.collection("planning").doc(a.state.selectManga);t.get().then((function(e){e.exists?t.update({status:parseInt(0)}):t.set({mangaId:a.state.selectManga,status:0,mangaName:a.titleCase(a.state.selectManga.replace(/-/g," "))})})).then((function(){a.setState(Object(b.a)({},Ue)),a.fileInput.value=""}))}))}))}))}},a.state=Object(b.a)({mangas:[]},Ue),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.firebase.firestore,a={};t.collection("/mangas").get().then((function(t){return t.forEach((function(e){a[e.id]=e.data()})),e.setState({mangas:a})}))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.images,o=a.errors;return r.a.createElement(G,{pageMeta:{title:"Ajouter un chapitre | ScanNation France "}},r.a.createElement(k.a,{className:"main"},r.a.createElement("form",{className:"formAdd",noValidate:!0,autoComplete:"off"},r.a.createElement(ke.a,{className:t.formControl,error:!!o&&!!("selectManga"in o)},r.a.createElement(De.a,{className:t.select,htmlFor:"selectManga"},"Choisir un manga"),r.a.createElement(Me.a,{className:t.select,native:!0,value:this.state.selectManga,onChange:this.handleChange,name:"selectManga",id:"selectManga"},r.a.createElement("option",{value:""}),Object.entries(this.state.mangas).map((function(e,a){return r.a.createElement("option",{value:e[0],key:a,className:t.option},e[1].title)}))),!!o&&("selectManga"in o?r.a.createElement(xe.a,null,o.selectManga):null)),r.a.createElement(oe.a,{value:this.state.selectTitle,onChange:this.handleChange,label:"Titre du chapitre",name:"selectTitle",error:!!o&&!!("selectTitle"in o),helperText:!!o&&("selectTitle"in o?o.selectTitle:"")}),r.a.createElement(oe.a,{value:this.state.selectChapter,onChange:this.handleChange,label:"Num\xe9ro du chapitre",name:"selectChapter",error:!!o&&!!("selectChapter"in o),helperText:!!o&&("selectChapter"in o?o.selectChapter:"")}),r.a.createElement("input",{accept:"image/*",id:"contained-button-file",type:"file",onChange:this.handleImage,multiple:!0,className:t.input,ref:function(t){return e.fileInput=t}}),r.a.createElement("label",{className:t.uploadImg,htmlFor:"contained-button-file"},r.a.createElement(A.a,{color:"primary",component:"span"},r.a.createElement(T.a,null)),r.a.createElement("span",{className:o?"images"in o?t.errors:"":null},n?n.length+" fichiers":"Ajouter des images")),r.a.createElement(Ae.a,{control:r.a.createElement(_e.a,{className:t.checkbox,onChange:this.handleChecked,value:"isLastChapter",color:"primary"}),label:"D\xe9finir comme chapitre le plus r\xe9cent"}),r.a.createElement(S.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(Te.a,null),onClick:this.handleUpload},this.state.loading?r.a.createElement(q.a,{size:30,color:"secondary"}):"Ajouter un chapitre"))))}}]),t}(n.Component),ze=Object(y.a)(Object(M.a)({option:{cursor:"pointer",color:"#000"},select:{color:"#fff"},input:{display:"none"},uploadImg:{margin:"10px 0",color:"#fff","& > span":{marginRight:"10px"}},errors:{color:"#f44336"},checkbox:{"& svg":{color:"#fff"}}}),I((function(e){return e&&!!e.roles.ADMIN})),g)(Le),Fe={manga_name:"",synopsis:"",image:null,loading:!1,errors:null},Re=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleImage=function(e){if(e.target.files[0]){var t=e.target.files;a.setState((function(){return{image:t}}))}},a.handleChange=function(e){a.setState(Object(re.a)({},e.target.name,e.target.value))},a.handleValidation=function(){var e=a.state.manga_name,t=a.state.synopsis,n=a.state.image,r={},o=!0;return e||(o=!1,r.manga_name="Champ obligatoire"),t||(o=!1,r.synopsis="Champ obligatoire"),n||(o=!1,r.image="Image obligatoire"),a.setState({errors:r}),o},a.handleUpload=function(){if(a.handleValidation()){var e=a.props.firebase.storage,t=a.props.firebase.firestore,n=a.state.image,r=[],o=a.state.manga_name.split(" ").join("-").toLowerCase(),l={resume:a.state.synopsis,title:a.state.manga_name,lastChapter:0,mangaImage:""};a.setState({loading:!0});var c=e.ref("".concat(o,"/").concat(n[0].name)).put(n[0]).then((function(e){return e.ref.getDownloadURL()})).then((function(e){return l.mangaImage=e}));r.push(c),Promise.all(r).then((function(){t.collection("mangas").doc(o).set(l).then((function(){a.setState(Object(b.a)({},Fe)),a.fileInput.value=""}))}))}},a.state=Object(b.a)({},Fe),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.manga_name,o=a.synopsis,l=a.image,c=a.errors,i=a.loading;return r.a.createElement(G,{pageMeta:{title:"Ajouter un manga | ScanNation France "}},r.a.createElement(k.a,{className:"main"},r.a.createElement("form",{className:"formAdd",noValidate:!0,autoComplete:"off"},r.a.createElement(oe.a,{onChange:this.handleChange,name:"manga_name",value:n,label:"Nom du Manga",error:!!c&&!!("manga_name"in c),helperText:!!c&&("manga_name"in c?c.manga_name:"")}),r.a.createElement(oe.a,{onChange:this.handleChange,name:"synopsis",value:o,label:"Synopsis",multiline:!0,rows:2,error:!!c&&!!("synopsis"in c),helperText:!!c&&("synopsis"in c?c.synopsis:"")}),r.a.createElement("input",{accept:"image/*",onChange:this.handleImage,ref:function(t){return e.fileInput=t},className:t.input,id:"contained-button-file",type:"file"}),r.a.createElement("label",{className:t.uploadImg,htmlFor:"contained-button-file"},r.a.createElement(A.a,{color:"primary",component:"span"},r.a.createElement(T.a,null)),r.a.createElement("span",{className:c?"image"in c?t.errors:"":null},l?l[0].name:"Ajouter une Image")),r.a.createElement(S.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(Te.a,null),onClick:this.handleUpload},i?r.a.createElement(q.a,{size:30,color:"secondary"}):"Ajouter un manga"))))}}]),t}(n.Component),We=Object(y.a)(Object(M.a)({input:{display:"none"},uploadImg:{margin:"10px 0",color:"#fff","& > span":{marginRight:"10px"}},errors:{color:"#f44336"}}),I((function(e){return e&&!!e.roles.ADMIN})),g)(Re),Be={selectManga:"",selectStatus:"",loading:!1,errors:null},Ve=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).titleCase=function(e){for(var t=e.toLowerCase().split(" "),a=0;a<t.length;a++)t[a]=t[a].charAt(0).toUpperCase()+t[a].substring(1);return t.join(" ")},a.handleChange=function(e){a.setState(Object(re.a)({},e.target.name,e.target.value))},a.handleValidation=function(){var e=a.state,t=e.selectManga,n=e.selectStatus,r={},o=!0;return t||(o=!1,r.selectManga="Champ obligatoire"),n||(o=!1,r.selectStatus="Champ obligatoire"),a.setState({errors:r}),o},a.handleUpload=function(){if(a.handleValidation()){a.setState({loading:!0});var e=a.state,t=e.selectManga,n=e.selectStatus;a.props.firebase.firestore.collection("planning").doc(t).set({mangaId:t,status:parseInt(n),mangaName:a.titleCase(t.replace(/-/g," "))}).then((function(){a.setState(Object(b.a)({},Be))}))}},a.componentDidMount=function(){var e=a.props.firebase.firestore,t={};e.collection("/mangas").get().then((function(e){return e.forEach((function(e){t[e.id]=e.data()})),a.setState({mangas:t})}))},a.state=Object(b.a)({mangas:[]},Be),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.errors;return r.a.createElement(G,{pageMeta:{title:"Ajouter un planning | ScanNation France "}},r.a.createElement(k.a,{className:"main"},r.a.createElement("form",{className:"formAdd",noValidate:!0,autoComplete:"off"},r.a.createElement(ke.a,{className:e.formControl,error:!!t&&!!("selectManga"in t)},r.a.createElement(De.a,{className:e.select,htmlFor:"selectManga"},"Choisir un manga"),r.a.createElement(Me.a,{className:e.select,native:!0,value:this.state.selectManga,onChange:this.handleChange,name:"selectManga",id:"selectManga"},r.a.createElement("option",{value:""}),Object.entries(this.state.mangas).map((function(e,t){return r.a.createElement("option",{value:e[0],key:t},e[1].title)}))),!!t&&("selectManga"in t?r.a.createElement(xe.a,null,t.selectManga):null)),r.a.createElement(ke.a,{className:e.formControl,error:!!t&&!!("selectStatus"in t)},r.a.createElement(De.a,{className:e.select,htmlFor:"selectStatus"},"Statut de la traduction"),r.a.createElement(Me.a,{className:e.select,native:!0,value:this.state.selectStatus,onChange:this.handleChange,name:"selectStatus",id:"selectStatus"},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"0"},"En attente du prochain chapitre"),r.a.createElement("option",{value:"25"},"Clean des pages"),r.a.createElement("option",{value:"50"},"Traduction en cours"),r.a.createElement("option",{value:"100"},"Dernier check")),!!t&&("selectStatus"in t?r.a.createElement(xe.a,null,t.selectStatus):null)),r.a.createElement("br",null),r.a.createElement(S.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(Te.a,null),onClick:this.handleUpload},this.state.loading?r.a.createElement(q.a,{size:30,color:"secondary"}):"Ajouter un nouveau planning"))))}}]),t}(n.Component),Ge=Object(y.a)(Object(M.a)({select:{color:"#fff","& option":{cursor:"pointer",color:"#000"}}}),I((function(e){return e&&!!e.roles.ADMIN})),g)(Ve),He={title:"",actu_info:"",loading:!1,errors:null},qe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(re.a)({},e.target.name,e.target.value))},a.handleValidation=function(){var e=a.state,t=e.title,n=e.actu_info,r={},o=!0;return t||(o=!1,r.title="Champ obligatoire"),n||(o=!1,r.actu_info="Champ obligatoire"),a.setState({errors:r}),o},a.handleUpload=function(){if(a.handleValidation()){var e=a.state,t=e.title,n=e.actu_info,r=a.props.firebase.firestore,o={date:new Date,title:t,actuInfo:n};a.setState({loading:!0}),r.collection("news").doc().set(o).then((function(){a.setState(Object(b.a)({},He))}))}},a.state=Object(b.a)({},He),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.errors,n=e.title,o=e.actu_info;return r.a.createElement(G,{pageMeta:{title:"Ajouter une actualit\xe9 | ScanNation France "}},r.a.createElement(k.a,{className:"main"},r.a.createElement("form",{className:"formAdd",noValidate:!0,autoComplete:"off"},r.a.createElement(oe.a,{onChange:this.handleChange,name:"title",value:n,label:"Titre de l'actu",error:!!a&&!!("title"in a),helperText:!!a&&("title"in a?a.title:"")}),r.a.createElement(oe.a,{onChange:this.handleChange,name:"actu_info",value:o,label:"Info de l'actu",multiline:!0,rows:2,error:!!a&&!!("actu_info"in a),helperText:!!a&&("actu_info"in a?a.actu_info:"")}),r.a.createElement("br",null),r.a.createElement(S.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(Te.a,null),onClick:this.handleUpload},t?r.a.createElement(q.a,{size:30,color:"secondary"}):"Ajouter une actualit\xe9"))))}}]),t}(n.Component),Je=Object(y.a)(Object(M.a)({}),I((function(e){return e&&!!e.roles.ADMIN})),g)(qe),Ke=a(201),Ye=a(203),Ze=a(202),$e=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(Ke.a,null,Object.values(this.props.mangaInfo).map((function(t,a){return r.a.createElement(k.a,{key:a},r.a.createElement(Ze.a,{className:e.media,image:t.mangaImage,title:"Contemplative Reptile"}),r.a.createElement(Ye.a,null,r.a.createElement(H.a,{component:"h3"},t.title),r.a.createElement(H.a,{variant:"body1"},t.resume)))})))}}]),t}(n.Component),Qe=Object(M.a)({media:{height:440}})($e),Xe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={mangaId:a.props.match.params.manga_name,mangaInfo:[],listChapters:[],titleChapter:"",loading:!0},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.firebase.firestore,a={},n={};t.collection("/mangas/").doc(this.state.mangaId).get().then((function(r){if(!r.exists)return e.props.history.push("/");a[r.id]=r.data(),e.setState({mangaInfo:a,titleChapter:r.data().title},(function(){return t.collection("/chapters").where("mangaId","==",e.state.mangaId).orderBy("chapter","desc").get().then((function(t){t.forEach((function(e){n[e.id]=e.data(),n[e.id].title=a[e.data().mangaId].title,n[e.id].resume=a[e.data().mangaId].resume,n[e.id].mangaImage=a[e.data().mangaId].mangaImage})),e.setState({listChapters:n,loading:!1})}))}))}))}},{key:"render",value:function(){var e=this.state,t=e.listChapters,a=e.titleChapter,n=this.props.classes;return r.a.createElement(G,{pageMeta:{title:"Chapitres de "+a+" | ScanNation France"}},r.a.createElement(k.a,{className:"main"},r.a.createElement(x.a,{item:!0,md:12},r.a.createElement(H.a,{variant:"h5",component:"h3",className:"titlePage"},"Liste des chapitres")),r.a.createElement(x.a,{container:!0,spacing:5},r.a.createElement(x.a,{item:!0,md:8,className:"containerInfo"},this.state.loading?r.a.createElement(q.a,{size:30,className:"loadingInfo"}):0===Object.entries(t).length?r.a.createElement(H.a,{variant:"body1",component:"p",className:n.noChapter},"Pas de chapitres encore disponibles sur le site"):Object.values(this.state.listChapters).map((function(e,t){return r.a.createElement(N.b,{key:t,to:e.mangaId+"/"+e.chapter,className:"newChapter"},r.a.createElement(k.a,{className:"newChapterImg"},r.a.createElement("img",{src:e.mangaImage,alt:""})),r.a.createElement(k.a,null,r.a.createElement(H.a,{variant:"body1",component:"p"},e.title," ",e.chapter),r.a.createElement(H.a,{variant:"body1",component:"p"},e.titleChapter)))}))),r.a.createElement(x.a,{item:!0,md:4},r.a.createElement(Qe,{mangaInfo:this.state.mangaInfo})))))}}]),t}(n.Component),et=Object(M.a)({noChapter:{color:"#fff"}})(g(Xe)),tt=a(205),at=a(206),nt=a(204),rt=Object(nt.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)}}})),ot=function(e){var t=e.children,a=rt(),n=Object(tt.a)({disableHysteresis:!0,threshold:100});return r.a.createElement(at.a,{in:n},r.a.createElement("div",{className:a.root,onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})}},t))},lt=a(94),ct=a.n(lt),it=a(207),st=a(96),mt=a.n(st),ut=a(95),pt=a.n(ut),ht=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={mangaId:a.props.match.params.manga_name,titleChapter:"",nbChapter:parseInt(a.props.match.params.nb_chapter),chapterData:[],loading:!0,isImgLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.firebase.firestore,a={},n={};t.collection("/mangas/").doc(this.state.mangaId).get().then((function(r){if(!r.exists)return e.props.history.push("/");a[r.id]=r.data(),e.setState({titleChapter:r.data().title}),e.setState({mangaInfo:a},(function(){return t.collection("/chapters").where("mangaId","==",e.state.mangaId).where("chapter","==",e.state.nbChapter).get().then((function(t){t.forEach((function(e){n[e.id]=e.data(),n[e.id].title=a[e.data().mangaId].title})),e.setState({chapterData:n})}))}))}))}},{key:"render",value:function(){var e=this.state,t=e.titleChapter,a=e.nbChapter,n=this.props.classes;return console.log(this.props),r.a.createElement(G,{pageMeta:{title:"Chapitre "+a+" de "+t+" | ScanNation France"}},r.a.createElement(it.a,{id:"back-to-top-anchor"}),r.a.createElement(k.a,{className:n.container},r.a.createElement(S.a,{variant:"contained",className:n.button,startIcon:r.a.createElement(pt.a,null),component:N.b,to:"/"+this.props.match.params.manga_name},"Liste des chapitres"),Object.values(this.state.chapterData).map((function(e){return e.pages.map((function(e,t){return r.a.createElement(k.a,{key:t,className:n.page},r.a.createElement(ct.a,{loader:r.a.createElement(q.a,{size:30}),src:e.pageImg,alt:"page chapitre"}))}))}))),r.a.createElement(ot,null,r.a.createElement(A.a,{size:"medium","aria-label":"scroll back to top"},r.a.createElement(mt.a,null))))}}]),t}(n.Component),dt=Object(M.a)({container:{maxWidth:"975px",margin:"0 auto","& a, & a:hover":{background:"transparent",boxShadow:"none",color:"#fff",paddingLeft:"0",paddingBottom:"20px"}},page:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px","& img":{width:"100%"}}})(g(ht)),gt=a(200),ft=a(149),bt=a(208),Et=a(97),vt=a.n(Et),Ct=a(98),jt=a.n(Ct),Ot=a(78),yt=a.n(Ot),It=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).displayChapters=function(e){a.setState(Object(re.a)({},e,!a.state[e]))},a.removeChapterImg=function(e){return a.props.firebase.storage.ref().child("/".concat(e.mangaId,"/").concat(e.chapter,"/")).listAll().then((function(e){e.items.forEach((function(e){e.delete()}))}))},a.removeMangaImg=function(e){return a.props.firebase.storage.ref().child("/".concat(e,"/")).listAll().then((function(e){e.items.forEach((function(e){e.delete()}))}))},a.handleDeleteChapter=function(e){a.props.firebase.firestore.collection("chapters").doc(e.id).delete().then((function(){a.removeChapterImg(e)})).then((function(){a.setState(Object(re.a)({},e.id,!0))}))},a.handleDeleteManga=function(e,t){var n=a.props.firebase.firestore;n.collection("chapters").where("mangaId","==",e.id).get().then((function(e){e.forEach((function(e){a.removeChapterImg(e.data()),e.ref.delete()}))})).then((function(){n.collection("mangas").doc(e.id).delete().then((function(){a.removeMangaImg(e.id)})).then((function(){n.collection("planning").doc(e.id).delete().then((function(){var n;a.setState((n={},Object(re.a)(n,t,!a.state[t]),Object(re.a)(n,e.id,!1),n))}))}))}))},a.componentDidMount=function(){var e=a.props.firebase.firestore,t={};e.collection("mangas").get().then((function(n){n.forEach((function(n){return t[n.id]=n.data(),t[n.id].id=n.id,t[n.id].listChapter=[],e.collection("chapters").orderBy("chapter","desc").get().then((function(e){e.forEach((function(e){t[e.data().mangaId].listChapter[e.id]=e.data(),t[e.data().mangaId].listChapter[e.id].id=e.id})),a.setState({mangas:t,loading:!1})}))}))}))},a.state={mangas:{},loading:!0},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(G,{pageMeta:{title:"Gestion des mangas | ScanNation France "}},r.a.createElement(x.a,{container:!0,className:"main"},r.a.createElement(x.a,{item:!0,md:12},r.a.createElement(H.a,{variant:"h5",component:"h3",className:"titlePage"},"Gestion des mangas")),r.a.createElement(x.a,{item:!0,md:12,className:"containerInfo"},this.state.loading?r.a.createElement(q.a,{size:30,className:"loadingInfo"}):Object.values(this.state.mangas).map((function(a,n){return r.a.createElement(k.a,{key:n},r.a.createElement(bt.a,{in:!e.state[n],timeout:"auto",unmountOnExit:!0},r.a.createElement(k.a,{className:"newChapter"},r.a.createElement(k.a,{className:"newChapterImg"},r.a.createElement("img",{src:a.mangaImage,alt:""})),r.a.createElement(k.a,null,r.a.createElement(H.a,{variant:"body1",component:"p"},a.title)),r.a.createElement(ft.a,{className:t.collapse,button:!0,onClick:function(){return e.displayChapters(a.id)}},e.state[a.id]?r.a.createElement(vt.a,null):r.a.createElement(jt.a,null)),r.a.createElement(gt.a,{className:t.deleteIcon,component:"span",onClick:function(){return e.handleDeleteManga(a,n)}},r.a.createElement(yt.a,null)))),r.a.createElement(bt.a,{in:e.state[a.id],timeout:"auto",unmountOnExit:!0,className:t.collapsedItem},Object.values(a.listChapter).map((function(n,o){return r.a.createElement(bt.a,{in:!e.state[n.id],key:o},r.a.createElement(k.a,{className:"newChapter"},r.a.createElement(k.a,{className:"newChapterImg"},r.a.createElement("img",{src:a.mangaImage,alt:""})),r.a.createElement(k.a,null,r.a.createElement(H.a,{variant:"body1",component:"p"},n.title," ",n.chapter),r.a.createElement(H.a,{variant:"body1",component:"p"},n.titleChapter)),r.a.createElement(gt.a,{className:t.deleteIcon,component:"span",onClick:function(){return e.handleDeleteChapter(n)}},r.a.createElement(yt.a,null))))}))))})))))}}]),t}(n.Component),Nt=Object(y.a)(Object(M.a)({collapse:{width:"auto"},collapsedItem:{paddingLeft:"70px"},deleteIcon:{position:"absolute",right:"10px"}}),I((function(e){return e&&!!e.roles.ADMIN})),g)(It),St=a(209),wt=O((function(){return r.a.createElement(N.a,null,r.a.createElement(W,null),r.a.createElement(St.a,{maxWidth:"lg"},r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/",component:ee}),r.a.createElement(c.a,{exact:!0,path:"/mangas",component:ne}),r.a.createElement(c.a,{exact:!0,path:"/planning",component:te}),r.a.createElement(c.a,{exact:!0,path:"/signin",component:ve}),r.a.createElement(c.a,{exact:!0,path:"/signup",component:me}),r.a.createElement(c.a,{exact:!0,path:"/pw-forget",component:de}),r.a.createElement(c.a,{exact:!0,path:"/account",component:Ie}),r.a.createElement(c.a,{exact:!0,path:"/admin",component:we}),r.a.createElement(c.a,{exact:!0,path:"/upload/upload_chapter",component:ze}),r.a.createElement(c.a,{exact:!0,path:"/upload/upload_manga",component:We}),r.a.createElement(c.a,{exact:!0,path:"/upload/upload_planning",component:Ge}),r.a.createElement(c.a,{exact:!0,path:"/upload/upload_news",component:Je}),r.a.createElement(c.a,{exact:!0,path:"/delete/delete_data",component:Nt}),r.a.createElement(c.a,{exact:!0,path:"/:manga_name",component:et}),r.a.createElement(c.a,{exact:!0,path:"/:manga_name/:nb_chapter",component:dt}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(f.Provider,{value:new j},r.a.createElement(wt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},91:function(e,t,a){e.exports=a.p+"static/media/logo.b64d5d72.png"}},[[112,1,2]]]);
//# sourceMappingURL=main.d147e378.chunk.js.map